<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test CS</title>
</head>
<body>
    
</body>
<script>
    window._uxa = window._uxa || [];
    if (typeof tc_vars !== 'undefined'){
      window._uxa.push(['setCustomVariable', 1, 'page_cat_1', 'page_cat_1', 3]);
      window._uxa.push(['setCustomVariable', 2, 'page_cat_2', 'page_cat_2', 3]);
      window._uxa.push(['setCustomVariable', 3, 'page_cat_3', 'page_cat_3', 3]);
      window._uxa.push(['setCustomVariable', 4, 'env_page_name', 'env_page_name', 3]);
      window._uxa.push(['setCustomVariable', 5, 'result_type', 'result_type', 3]);
      window._uxa.push(['setCustomVariable', 6, 'results_arrival_station', 'results_arrival_station', 3]);
      window._uxa.push(['setCustomVariable', 7, 'results_departure_station', 'results_departure_station', 3]);
      window._uxa.push(['setCustomVariable', 8, 'results_number', 'results_number', 3]);
      window._uxa.push(['setCustomVariable', 9, 'cart_total_quantity', 'cart_total_quantity', 3]);
      window._uxa.push(['setCustomVariable', 10, 'contains_basket_info', 'contains_basket_info', 3]);
      window._uxa.push(['setCustomVariable', 11, 'tc_data_segmentID', 'tc_data_segmentID', 3]);
      window._uxa.push(['setCustomVariable', 12, 'contains_error_code', 'contains_error_code', 3]);
      window._uxa.push(['setCustomVariable', 13, 'form_is_in_error','form_is_error', 3]);
      window._uxa.push(['setCustomVariable', 14, 'results_adult_number', 'results_adult_number', 3]);
      window._uxa.push(['setCustomVariable', 15, 'results_arrival_date ', 'results_arrival_date', 3]);
      window._uxa.push(['setCustomVariable', 16, 'results_departure_date', 'results_departure_date', 3]);
      window._uxa.push(['setCustomVariable', 17, 'results_lowest_price  ', 'results_lowest_price', 3]);
      if(typeof tc_vars.cart_tickets !== "undefined"){
        if(typeof tc_vars.cart_tickets.current_ticket !== "undefined"){
          if(typeof tc_vars.cart_tickets.current_ticket.go !== "undefined"){
            window._uxa.push(['setCustomVariable', 18, 'option_comfort_type', tc_vars.cart_tickets.current_ticket.go.option_comfort_type, 3]);
            window._uxa.push(['setCustomVariable', 19, 'departure_hour  ', tc_vars.cart_tickets.current_ticket.go.departure_hour  , 3]);
          }
        }
      }
       window._uxa.push(["trackDynamicVariable",{key: "results_child_number", value: tc_vars.results_child_number}]);
    }  
  if (typeof CS_CONF === 'undefined'){
    window._uxa.push(['setPath', 'foo']);
    var mt = document.createElement("script"); mt.type = "text/javascript"; mt.async = true;
mt.id = "tc_script_614_1";
    mt.src = "//t.contentsquare.net/uxa/848dab560afb4.js";
    document.getElementsByTagName("head")[0].appendChild(mt);
  }
  else {
    window._uxa.push(['trackPageview', tc_vars.env_page_name !== "" ? tc_vars.env_page_name :  (window.location.pathname +window.location.hash.replace('#','?__'))]);
  }

//Connexion avec Google Optimize
// if(tC.getCookie('_gaexp') !== ""){
// window.Goo_Optimize_Exp_ID = tC.getCookie('_gaexp'); 
// var Variation_Optimize_key = Goo_Optimize_Exp_ID.match(/.{22}\./g);
//       var Variation_Optimize_value = Goo_Optimize_Exp_ID.match(/[0-9]{5,}\.[0-9]?\-?[0-9]?\-?[0-9]?\-?[0-9]/g);
//       for (i = 0, j = 0; i < Variation_Optimize_key.length, j < Variation_Optimize_value.length; i++, j++) {
//         window._uxa.push(["trackDynamicVariable",{key: "AB_Goo_Optimize_" + Variation_Optimize_key[i], value: String(Variation_Optimize_value[j].substring(6,Variation_Optimize_value[j].length))}]);
//       }
// }

//Transaction
if(window.location.href.indexOf('confirmation') !== -1){
  console.log('confirmation');
window._uxa.push(['ecommerce:addTransaction', {
    'id': '1234586',
    'revenue': '50',
    'shipping': '0',
    'tax': '10'
}]);
window._uxa.push(['ecommerce:send']);
}
</script>

</html>